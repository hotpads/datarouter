package com.hotpads.datarouter.test.client.insert.generated;

import javax.inject.Inject;
import javax.inject.Singleton;

import com.hotpads.datarouter.config.DatarouterSettings;
import com.hotpads.datarouter.node.factory.NodeFactory;
import com.hotpads.datarouter.node.op.combo.SortedMapStorage;
import com.hotpads.datarouter.routing.BaseRouter;
import com.hotpads.datarouter.routing.Datarouter;
import com.hotpads.datarouter.test.DatarouterTestClientIds;
import com.hotpads.datarouter.test.TestDatarouterProperties;
import com.hotpads.datarouter.test.client.insert.generated.managed.PutOpIdGeneratedManagedTestBean;
import com.hotpads.datarouter.test.client.insert.generated.managed.PutOpIdGeneratedManagedTestBean.PutOpIdGeneratedManagedTestBeanFielder;
import com.hotpads.datarouter.test.client.insert.generated.managed.PutOpIdGeneratedManagedTestBeanKey;
import com.hotpads.datarouter.test.client.insert.generated.random.PutOpIdGeneratedRandomTestBean;
import com.hotpads.datarouter.test.client.insert.generated.random.PutOpIdGeneratedRandomTestBean.PutOpIdGeneratedRandomTestBeanFielder;
import com.hotpads.datarouter.test.client.insert.generated.random.PutOpIdGeneratedRandomTestBeanKey;

@Singleton
public class AutoGeneratedIdTestRouter extends BaseRouter{

	private static final String NAME = "autoGeneratedIdTestRouter";

	public SortedMapStorage<PutOpIdGeneratedManagedTestBeanKey, PutOpIdGeneratedManagedTestBean>
			putOpIdGeneratedManaged;
	public SortedMapStorage<PutOpIdGeneratedRandomTestBeanKey, PutOpIdGeneratedRandomTestBean> putOpIdGeneratedRandom;

	@Inject
	public AutoGeneratedIdTestRouter(TestDatarouterProperties datarouterProperties, Datarouter datarouter,
			DatarouterSettings datarouterSettings, NodeFactory nodeFactory){
		super(datarouter, datarouterProperties.getTestRouterConfigFileLocation(), NAME, nodeFactory,
				datarouterSettings);

		putOpIdGeneratedManaged = register(nodeFactory.create(DatarouterTestClientIds.CLIENT_drTestJdbc0,
				PutOpIdGeneratedManagedTestBean.class, PutOpIdGeneratedManagedTestBeanFielder.class, this, false));
		putOpIdGeneratedRandom = register(nodeFactory.create(DatarouterTestClientIds.CLIENT_drTestJdbc0,
				PutOpIdGeneratedRandomTestBean.class, PutOpIdGeneratedRandomTestBeanFielder.class, this, false));

	}

}
